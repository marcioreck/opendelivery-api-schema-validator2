RewriteEngine On
RewriteBase /opendelivery-api-schema-validator2/

# Servir arquivos estáticos diretamente (CSS, JS, imagens, fontes)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [L]

# Para SPAs React - todas as rotas que não são arquivos devem ir para index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /opendelivery-api-schema-validator2/index.html [L]

# Headers para melhor performance
<IfModule mod_headers.c>
    # Cache para arquivos estáticos
    <FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
        Header set Cache-Control "public, max-age=31536000"
    </FilesMatch>
    
    # Sem cache para HTML
    <FilesMatch "\.html$">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </FilesMatch>
</IfModule>

# Compressão GZIP
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Tipos MIME
AddType application/javascript .js
AddType text/css .css
AddType image/svg+xml .svg
